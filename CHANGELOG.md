## [1.4.2] - 2025-11-30

### Changed
- 打开已有缓存的网络图时，结点之间会用纯直线相连了。个人觉得视觉效果比原先更好。

### Improved
- 现在在调试菜单中，会显示网络图的布局来源自迭代或缓存了。
- 若网络图的布局来源自缓存，则不会显示无意义的迭代次数/进度了。

### Fixed
- 打开已有缓存的网络图时，完全不会有物理迭代过程了，以进一步加快打开大图时的速度。

## [1.4.1] - 2025-11-29

### Improved
- 为客户端增加了彩色字体，希望能提升一定可读性。

### Fixed
- 修复了在手动删除缓存/通过客户端重新生成网络图时，缓存文件不会被正确清除的问题。
- 修复了打开有缓存的网络图后，拖动结点时出现的一些问题。包括：
  - 点击结点以外的位置时，被拖动的结点会被重置到初始位置。
  - 点击被拖动的结点时，不会显示详细信息浮窗。

## [1.4.0] - 2025-11-27

### Added
- 实装了缓存功能。
  - 现在在首次打开一张触发网络图并完成物理迭代后，结点的布局会被放入 `data/maps/<map_name>/<map_name>_layout.json` 文件中。
  - 之后打开同一触发网络图时，便可以直接根据缓存文件迅速还原结点布局。
  - 在客户端中重新生成网络图时，会将缓存文件**清除**以免过时的缓存导致显示出错。
  - 为了支持这一功能，新增了 `tools/trigger_http_server.py` 文件。

### Improved
- 改进了客户端的列表显示，现在它会分开显示 `(JSON完整性)`、`（生成版本号）`、`（有无缓存）` 了。
  - 形如 `[0] aanes: aanes_trigger_graph.html (COMPLETE) (v1.4.0) (CACHED)`
- 改进了客户端的交互逻辑，现在在生成已有的地图时，也一定会调用一次 `map_parser.py` 来重新解析触发/条件/行为/局部变量的 `JSON` 文件了。
  - 之前若这些 `JSON` 过时但完整，程序在生成网络图时便不会重新解析，进而无法及时反映地图的更新。
- 改进了客户端的超时处理，现在在等待30秒仍未成功生成网络图时，会终止生成并提示可能是程序出了 bug。

### Fixed
- `稳定进度` 和 `稳定耗时` 可以正确显示了。
- `FPS` 显示真的可以通过 `config.yml` 的同一个选项开关了。

## [1.3.1] - 2025-11-26

### Fixed
- `稳定进度` 和 `稳定耗时` 可以正确显示了。
- `FPS` 显示真的可以通过 `config.yml` 的同一个选项开关了。

## [1.3.0] - 2025-11-26

### Improved
- 改进了上个版本中结点/边的数目确定迭代次数的算法。
- 现在会在打开触发图的读条阶段进行全部物理计算，并在读条结束后完全停止物理效果，这样可以有效改善性能。
  - 代价则是对于大图而言，读条的时间可以*非常*长，目前正在研究缓存物理布局的功能以避免每次打开网络图时都重新读条。
- 连续通过鼠标滚轮缩放时，结点和边的透明度两次更新之间会有默认120ms的最小间隔。
  - “最小间隔”的意思是，必须经过最少这么长时间，且再次滚动一次滚轮，才会触发透明度更新，在部分情况下会影响观感。
  - 可以在 `config.yml` 文件中自定义。
  - 间隔越小，透明度的变化越平滑，但代价是缩放时的帧数很可能严重下降。

### Added
- 新增了内置的版本号：现在脚本生成触发网络图时可以一并注入版本号，客户端则会根据版本号提醒用户重新生成过时的网络图。
  - 如果网络图所需的 `json` 文件完整，地图也可以被强行打开。
- 调试菜单新增了 `稳定进度`（当前迭代次数/最大迭代次数）和 `稳定耗时`（达到最大迭代次数/稳定时的耗时）。
- 新增了 `FPS` 显示，虽然和调试菜单分开，但可以通过 `config.yml` 的同一个选项开关。

### Changed
- 移除了“缩放倍率小于特定值时，隐藏结点下的标签”这一功能。
  - 在视觉上，标签仍然会在较小的缩放倍率下被隐藏。
  - 此前这个功能的作用是“技术上”一并隐藏标签以降低前端渲染的压力。

## [1.1.0] - 2025-11-13

### Improved
- 现在会根据结点/边的数目加权计算 `size_score` 并相应设定网络图稳定前的最大迭代次数了。
- 在缩放倍率小于特定值时，结点下的标签会被隐藏，以降低前端渲染的压力。
- 最大迭代次数、结点/边的权重、隐藏结点标签时的缩放倍率都可在 `config.yml` 文件中自定义。

### Fixed
- 修复了初始缩放读取与高亮的一致性问题。现在初次打开地图时，左下角会显示正确的缩放倍率并相应设定结点/边的高亮程度了。

### Added
- 新增客户端：`tools/open_trigger_graphs.py`，支持列表浏览、按需生成、批量生成与通过本地 HTTP 服务器打开网格图。
- 新增调试菜单：目前只会显示 `node_count`（结点数）、`edge_count`（边数）、`stab_iter`（最大迭代次数）、`size_score` 以及缩放倍率。
  - 可以在 `config.yml` 内开关。
- 新增外部文件：`*_node_details.json` 与 `*_debug.json`，在通过客户端打开网格图时会自动生成并放置在相应网格图的目录下。
  - 用处是 HTML 性能并使调试信息可用。

### Changed
- 因为有了客户端，将 `visualize_triggers.py` 与 `map_parser.py` 放入了新增的 `tools/` 目录以便与其他工具统一管理；放在根目录下的相应文件仍然可以使用，但是优先级低于 `tools/` 目录。

## [1.0.1] - 2025-10-22
### Fixed
- 修正了触发行为中路径点ID `waypoint_id` 的解析逻辑。技术细节:
  - ID为单个字母 `A..Z` 时，会解析为 0–25；
  - ID为两个字母 `AA..AZ` 时，会解析为 26–51，如此等等;
  - 即将首位的 `A` 理解为 `1`，而非首位的理解为 `0`。




